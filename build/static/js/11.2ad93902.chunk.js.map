{"version":3,"sources":["shared/components/ErrorMessage/useStyles.ts","shared/components/ErrorMessage/index.tsx","../node_modules/@material-ui/icons/Error.js","login/components/Form/formConfig/index.ts","login/services/login/index.ts","login/components/Form/useStyles.ts","login/components/Form/index.tsx","login/services/login/hooks.ts","assets/img/login.jpg","login/useStyles.ts","login/index.tsx"],"names":["useStyles","makeStyles","theme","errorIcon","width","color","marginRight","loginFailed","fontSize","variables","fontSizeXs","border","display","alignItems","justifyContent","borderRadius","ErrorMessage","className","message","classes","_interopRequireDefault","require","_interopRequireWildcard","Object","defineProperty","exports","value","default","React","_default","createElement","d","useFormConfig","mutate","schema","yup","shape","email","emailValidator","useForm","defaultValues","password","mode","resolver","yupResolver","register","handleSubmit","onSubmit","data","errors","login","getService","config","url","method","name","apiKey","withAccessToken","form","marginBottom","recaptcha","height","background","button","marginTop","Form","forgetPasswordButton","children","t","useTranslation","useMutation","onSuccess","response","result_data","permissions","premissions","userData","authenticatedUser","permissionList","JSON","stringify","window","localStorage","setItem","authConfig","setAccessToken","access_token","location","href","isLoading","isSubmitError","isError","Field","placeholder","ref","label","error","Boolean","errorMessage","PasswordField","Button","size","fullWidth","type","disabled","container","gridTemplateColumns","formContainer","mainTitle","textAlign","subTitle","fontSizeSm","loginBackground","logo","position","top","left","forgetPassword","cursor","palette","primary","main","padding","languageButton","boxSizing","right","paddingLeft","paddingTop","paddingBottom","overflow","paddingRight","fill","Login","useState","open","setOpen","ResetPassword","onClose","disableBackdropClick","src","LogoSrc","alt","LanguageButton","Typography","variant","onClick"],"mappings":"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","file":"static/js/11.2ad93902.chunk.js","sourcesContent":["import { makeStyles } from '@material-ui/core'\n\nconst useStyles = makeStyles((theme) => ({\n  errorIcon: {\n    width: '15px',\n    color: 'red',\n    marginRight: '10px',\n  },\n  loginFailed: {\n    fontSize: theme.variables.fontSizeXs,\n    border: '1px solid #F66363',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderRadius: '6px',\n  },\n}))\n\nexport default useStyles\n","import React from 'react'\nimport ErrorIcon from '@material-ui/icons/Error'\nimport useStyles from './useStyles'\nimport { Props } from './model'\n\nconst ErrorMessage: React.FC<Props> = ({ className, message }) => {\n  const classes = useStyles()\n\n  return (\n    <span className={className}>\n      <ErrorIcon className={classes.errorIcon} />\n      {message}\n    </span>\n  )\n}\n\nexport default ErrorMessage\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z\"\n}), 'Error');\n\nexports.default = _default;","import { useForm } from 'react-hook-form'\nimport { yupResolver } from '@hookform/resolvers/yup'\nimport * as yup from 'yup'\nimport emailValidator from 'src/utils/validator/emailValidator'\nimport { LoginModel } from 'src/login/services/login'\n// import passwordValidator from 'src/utils/validator/passwordValidator'\n\nconst useFormConfig = (mutate: (data: LoginModel) => unknown) => {\n  const schema = yup.object().shape({\n    email: emailValidator,\n    // password: passwordValidator,\n  })\n\n  const { register, handleSubmit, errors } = useForm({\n    defaultValues: { email: '', password: '' },\n    mode: 'onBlur',\n    resolver: yupResolver(schema),\n  })\n\n  const onSubmit = (data: LoginModel) => {\n    mutate(data)\n  }\n\n  return { register, handleSubmit, onSubmit, errors }\n}\n\nexport default useFormConfig\n","import { AxiosResponse } from 'axios'\nimport getService from 'src/core/services/base'\nimport apiKey from 'src/core/services/base/apiKey'\nimport { dataObject } from 'src/shared/types/data.type'\n\nconst url = 'account/auth/login'\n\nexport interface LoginModel {\n  email: string\n  password: string\n}\n\nexport function login({ email, password }: LoginModel): Promise<AxiosResponse<dataObject>> {\n  return getService({\n    config: {\n      url,\n      method: 'post',\n      data: { email, password },\n    },\n    name: apiKey.login,\n    withAccessToken: false,\n  })\n}\n","import { makeStyles } from '@material-ui/core'\n\nconst useStyles = makeStyles((theme) => ({\n  form: {\n    '& > div': {\n      width: '100%',\n    },\n\n    '& > div:nth-child(-n+2)': {\n      marginBottom: '16px',\n    },\n  },\n  errorIcon: {\n    width: '15px',\n    color: 'red',\n    marginRight: '10px',\n  },\n  loginFailed: {\n    fontSize: theme.variables.fontSizeXs,\n    border: '1px solid #F66363',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderRadius: '6px',\n  },\n  recaptcha: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    height: '68px',\n    background: '#d7d7d7',\n    marginBottom: '32px',\n  },\n  button: {\n    marginTop: '32px',\n  },\n}))\n\nexport default useStyles\n","import React from 'react'\nimport { useTranslation } from 'react-i18next'\nimport Field from 'src/shared/components/Field'\nimport PasswordField from 'src/shared/components/PasswordField'\nimport useFormConfig from './formConfig'\nimport Button from 'src/shared/components/Button'\nimport useLogin from 'src/login/services/login/hooks'\nimport ErrorMessage from 'src/shared/components/ErrorMessage'\nimport useStyles from './useStyles'\n\nconst Form: React.FC = ({ children: forgetPasswordButton }) => {\n  const { t } = useTranslation()\n  const classes = useStyles()\n  const { mutate, isLoading, isError: isSubmitError } = useLogin()\n  const { register, handleSubmit, onSubmit, errors } = useFormConfig(mutate)\n\n  return (\n    <form className={classes.form} onSubmit={handleSubmit(onSubmit)}>\n      {isSubmitError && <ErrorMessage className={classes.loginFailed} message='電子郵件或密碼輸入錯誤，請再嘗試一次' />}\n      <Field\n        placeholder='Username@brightenoptix.com'\n        ref={register}\n        label={t('loginPage.email')}\n        name='email'\n        error={Boolean(errors.email)}\n        errorMessage={errors?.email?.message}\n      />\n      <PasswordField\n        ref={register}\n        label={t('loginPage.password')}\n        name='password'\n        error={Boolean(errors.password)}\n        errorMessage={errors?.password?.message}\n        placeholder={t('loginPage.passwordPlaceholder')}\n      />\n      {forgetPasswordButton}\n      <div className={classes.recaptcha}>recaptcha</div>\n      <Button size='large' fullWidth type='submit' disabled={isLoading}>\n        {t('loginPage.login')}\n      </Button>\n    </form>\n  )\n}\n\nexport default Form\n","import { AxiosResponse } from 'axios'\nimport { useMutation } from 'react-query'\nimport { dataObject } from 'src/shared/types/data.type'\nimport authConfig from 'src/utils/authConfig'\nimport { login, LoginModel } from '.'\n\nexport default function useLogin() {\n  return useMutation<AxiosResponse<dataObject>, unknown, LoginModel, unknown>(login, {\n    onSuccess: (response) => {\n      const data = response.data.result_data as dataObject\n      const permissions = data.premissions as string[]\n      const userData = data.authenticatedUser as dataObject\n      const permissionList = JSON.stringify(permissions)\n\n      window.localStorage.setItem('isLogin', 'true')\n      window.localStorage.setItem('permissions', permissionList)\n      window.localStorage.setItem('authenticatedUser', JSON.stringify(userData))\n\n      authConfig.setAccessToken(data.access_token as string)\n      location.href = '/'\n    },\n  })\n}\n","export default __webpack_public_path__ + \"static/media/login.e54a8a13.jpg\";","import { makeStyles } from '@material-ui/core'\nimport loginBackground from 'src/assets/img/login.jpg'\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    display: 'grid',\n    gridTemplateColumns: 'auto 544px',\n    height: '100%',\n  },\n  formContainer: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  form: {\n    width: '290px',\n  },\n  mainTitle: {\n    textAlign: 'center',\n    marginBottom: '8px',\n  },\n  subTitle: {\n    textAlign: 'center',\n    marginBottom: '48px',\n    color: '#868A8F',\n    fontSize: theme.variables.fontSizeSm,\n  },\n  background: {\n    background: `center / cover no-repeat url(${loginBackground})`,\n  },\n  logo: {\n    width: '133px',\n    position: 'absolute',\n    top: '28px',\n    left: '28px',\n  },\n  forgetPassword: {\n    background: 'none',\n    cursor: 'pointer',\n    border: 'none',\n    fontSize: theme.variables.fontSizeSm,\n    color: theme.palette.primary.main,\n    padding: 0,\n    marginBottom: '16px',\n  },\n  languageButton: {\n    boxSizing: 'border-box',\n    width: '98px',\n    height: '38px',\n    position: 'absolute',\n    top: '28px',\n    right: '28px',\n    background: '#F4F7FD',\n    fontSize: theme.variables.fontSizeSm,\n    color: '#153C7B',\n    borderRadius: '8px',\n    paddingLeft: '12px',\n    paddingTop: '8px',\n    paddingBottom: '8px',\n    overflow: 'hidden',\n\n    '& .MuiSelect-select.MuiSelect-select': {\n      paddingRight: '30px',\n      background: 'transparent',\n    },\n\n    '& .MuiSelect-icon': {\n      top: 'auto',\n      right: '12px',\n      '& path': {\n        fill: '#A1B1CA',\n      },\n    },\n  },\n}))\n\nexport default useStyles\n","import { Typography } from '@material-ui/core'\nimport React from 'react'\nimport { useTranslation } from 'react-i18next'\n// import { useTranslation } from 'react-i18next'\nimport LanguageButton from 'src/shared/components/LanguageButton'\nimport ResetPassword from 'src/shared/components/ResetPassword'\nimport LogoSrc from 'src/assets/img/logo.png'\nimport Form from './components/Form'\nimport useStyles from './useStyles'\n\nconst Login: React.FC = () => {\n  const classes = useStyles()\n  const { t } = useTranslation()\n  const [open, setOpen] = React.useState(false)\n\n  return (\n    <div className={classes.container}>\n      <ResetPassword open={open} onClose={() => setOpen(false)} disableBackdropClick />\n      <div className={classes.background}>\n        <img className={classes.logo} src={LogoSrc} alt='' />\n      </div>\n      <div className={classes.formContainer}>\n        <LanguageButton className={`${classes.languageButton} langBtn`} />\n        <div className={classes.form}>\n          <Typography variant='h5' className={classes.mainTitle}>\n            {t('loginPage.title')}\n          </Typography>\n          <Typography className={classes.subTitle}>{t('loginPage.subTitle')}</Typography>\n          <Form>\n            <button onClick={() => setOpen(true)} type='button' className={classes.forgetPassword}>\n              {t('loginPage.forgetPassword')}\n            </button>\n          </Form>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default Login\n"],"sourceRoot":""}